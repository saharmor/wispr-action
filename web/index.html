<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wispr Action - Voice Command Manager</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="shortcut icon" href="favicon.ico">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-title-wrapper">
                    <img src="logo.png" alt="Wispr Logo" class="header-logo">
                    <div class="header-text">
                        <h1>Wispr Action</h1>
                        <p class="subtitle">Turn raw speech into structured commands</p>
                    </div>
                </div>
            </div>
            <div class="header-actions">
                <div class="monitor-status">
                    <span class="status-indicator" id="statusIndicator"></span>
                    <span id="statusText">Checking...</span>
                </div>
                <button id="toggleMonitorBtn" class="btn btn-primary">Start Monitor</button>
                <button id="addMcpHeaderBtn" class="btn btn-primary">+ Add MCP Client</button>
                <button id="newCommandBtn" class="btn btn-success">+ New Command</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Commands & MCP Clients Section -->
            <section class="command-list-section" id="mainSection">
                <div class="section-header">
                    <div class="view-tabs">
                        <button class="view-tab active" id="mcpTab" onclick="switchView('mcp')">MCP Clients</button>
                        <button class="view-tab" id="commandsTab" onclick="switchView('commands')">Commands</button>
                    </div>
                    <span class="command-count" id="commandCount" style="display: none;">0 commands</span>
                </div>
                
                <!-- MCP Clients View -->
                <div id="mcpView">
                    <div class="section-actions-inline">
                        <button class="btn btn-secondary" id="refreshMcpBtn">Refresh</button>
                        <button class="btn btn-primary" id="addMcpBtn">+ Add MCP Client</button>
                    </div>
                    
                    <div class="empty-state" id="mcpEmptyState">
                        <div class="empty-state-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
                            </svg>
                        </div>
                        <div class="empty-state-content">
                            <h3>No MCP clients configured</h3>
                            <p>Add a client to enable voice automations</p>
                        </div>
                    </div>

                    <div id="mcpServersList" class="mcp-list"></div>
                </div>

                <!-- Commands View -->
                <div id="commandsView" style="display: none;">
                    <div class="empty-state" id="emptyState">
                        <div class="empty-state-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                            </svg>
                        </div>
                        <div class="empty-state-content">
                            <h3>No commands yet</h3>
                            <p>Create your first voice command to get started</p>
                        </div>
                    </div>

                    <div class="command-table-container" id="commandTableContainer" style="display: none;">
                        <table class="command-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Examples</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="commandTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Test Panel -->
            <section class="test-panel">
                <h3>Test Command</h3>
                <div class="test-input-group">
                    <textarea 
                        id="testPhrase" 
                        placeholder="Type a test phrase, e.g., 'command, run email processor for sahar@gmail.com'"
                        rows="3"
                    ></textarea>
                    <button id="testParseBtn" class="btn btn-primary">Parse Command</button>
                </div>
                <div class="test-result" id="testResult" style="display: none;">
                    <div class="result-header">
                        <strong>Result:</strong>
                    </div>
                    <div id="testResultContent"></div>
                    <button id="testExecuteBtn" class="btn btn-secondary" style="display: none;">Execute</button>
                </div>
            </section>

            <!-- History Section (Full Width Below) -->
            <section class="command-list-section" id="historySection">
                <div class="section-header">
                    <h3>History</h3>
                </div>

                <div class="empty-state" id="historyEmptyState">
                    <div class="empty-state-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div class="empty-state-content">
                        <h3>No command history yet</h3>
                        <p>Execute a command to see it here</p>
                    </div>
                </div>

                <div class="history-table-container" id="historyTableContainer" style="display: none;">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>Command</th>
                                <th>Parameters</th>
                                <th>Status</th>
                                <th>Output</th>
                                <th>Duration</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                        </tbody>
                    </table>
                    <div class="history-pagination" id="historyPagination" style="display: none;">
                        <button id="historyPrevBtn" class="btn btn-secondary" onclick="changeHistoryPage(-1)">Previous</button>
                        <span class="history-page-info" id="historyPageInfo"></span>
                        <button id="historyNextBtn" class="btn btn-secondary" onclick="changeHistoryPage(1)">Next</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Unified Editor Panel (Slide-in) -->
    <div class="editor-overlay" id="editorOverlay">
        <div class="editor-panel" id="editorPanel">
            <div class="editor-header">
                <h2 id="editorTitle">New Command</h2>
                <button class="close-btn" onclick="closeEditor()">&times;</button>
            </div>

            <div class="editor-content">
                <!-- Command Sections -->
                <div id="commandSections">
                <!-- Section 1: Basics -->
                <section class="editor-section">
                    <h3>General</h3>
                    <div class="form-group">
                        <label for="cmdName">Command Name *</label>
                        <input type="text" id="cmdName" placeholder="e.g., Process Emails" required>
                    </div>
                    <div class="form-group">
                        <label for="cmdDescription">Description *</label>
                        <textarea id="cmdDescription" rows="2" placeholder="What does this command do?" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="cmdTimeout">Timeout (seconds)</label>
                        <input type="number" id="cmdTimeout" min="0" max="600" placeholder="0">
                        <small class="help-text">Maximum execution time. Default: 0 (no timeout).</small>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="cmdRunForeground">
                            <span>Run in foreground?</span>
                        </label>
                        <small class="help-text">Opens a visible terminal window for script execution (useful for debugging)</small>
                    </div>
                </section>


                <!-- Section 3: Parameters -->
                <section class="editor-section">
                    <h3>Parameters</h3>
                    <div class="params-table-container">
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="paramsTableBody">
                                <tr class="param-row">
                                    <td><input type="text" class="param-name" placeholder="e.g. email, location, etc." oninput="updateArgsTemplatePlaceholder()"></td>
                                    <td>
                                        <select class="param-type" onchange="handleParamTypeChange(this)">
                                            <option value="string">string</option>
                                            <option value="number">number</option>
                                            <option value="email">email</option>
                                            <option value="url">url</option>
                                            <option value="boolean">boolean</option>
                                            <option value="options">options</option>
                                        </select>
                                    </td>
                                    <td><input type="checkbox" class="param-required"></td>
                                    <td>
                                        <input type="text" class="param-description" placeholder="The email address">
                                        <div class="param-options-wrapper">
                                            <label>Options (one per line)</label>
                                            <textarea class="param-options" placeholder="staging&#10;production"></textarea>
                                            <small class="help-text">Only used when type is <code>options</code>. Numbers are supported.</small>
                                        </div>
                                    </td>
                                    <td><button class="btn-icon" onclick="removeParam(this)">‚àí</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-sm" onclick="addParam()">+ Add Parameter</button>
                </section>

                <!-- Section Examples -->
                <section class="editor-section">
                    <h3>Example Phrases (Optional)</h3>
                    <p class="help-text">Provide 2-5 example phrases to help the AI understand your command</p>
                    <div id="examplesContainer">
                        <div class="example-row">
                            <input type="text" class="example-input" placeholder="e.g., 'run emails for sahar@gmail.com'">
                            <button class="btn-icon" onclick="removeExample(this)">‚àí</button>
                        </div>
                    </div>
                    <button class="btn btn-sm" onclick="addExample()">+ Add Example</button>
                </section>

                <!-- Section 4: Action -->
                <section class="editor-section">
                    <h3>Action</h3>
                    <div class="action-type-selector">
                        <label class="radio-label">
                            <input type="radio" name="actionType" value="script" checked onchange="toggleActionType()">
                            <span>Run Script</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="actionType" value="http" onchange="toggleActionType()">
                            <span>Call HTTP</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="actionType" value="mcp" onchange="toggleActionType()">
                            <span>MCP Tool</span>
                        </label>
                    </div>

                    <!-- Script Action -->
                    <div id="scriptAction" class="action-config">
                        <div class="form-group">
                            <label for="scriptPath">Script Path *</label>
                            <input type="text" id="scriptPath" placeholder="~/scripts/process_emails.py">
                            <button type="button" class="btn btn-sm btn-secondary" onclick="showLaunchJsonImporter()" style="margin-top: 8px;">
                                üìã Import from launch.json
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="argsTemplate">Arguments Template</label>
                            <input type="text" id="argsTemplate" placeholder="Define parameters above to see examples">
                            <small class="help-text" id="scriptHelpText">
                                Use <code>{param_name}</code> to reference parameters. 
                                <strong>For optional parameters</strong>, wrap them in brackets: <code>[--flag={optional_param}]</code>.
                                <br>Examples: <code>--email={email} [--days={days}]</code> or <code>{file} [--format={format}]</code>
                            </small>
                        </div>
                        
                        <!-- Python-specific options (collapsible) -->
                        <div class="collapsible-section">
                            <button type="button" class="collapsible-toggle" onclick="togglePythonOptions(event)">
                                <span class="toggle-icon">‚ñ∂</span>
                                Python Environment (Optional)
                            </button>
                            <div class="collapsible-content" id="pythonOptions">
                                <div class="form-group">
                                    <label for="workingDirectory">Working Directory</label>
                                    <div class="input-with-button">
                                        <input type="text" id="workingDirectory" placeholder="~/project">
                                        <button type="button" class="btn-icon-secondary" onclick="pickDirectory('workingDirectory')" title="Browse for directory">üìÅ</button>
                                    </div>
                                    <small class="help-text">Directory to run the script from</small>
                                </div>
                                <div class="form-group">
                                    <label for="pythonInterpreter">Python Interpreter</label>
                                    <input type="text" id="pythonInterpreter" placeholder="venv/bin/python or ~/project/venv/bin/python">
                                    <small class="help-text">Path to Python interpreter (absolute, relative to working directory, or using ~). Leave empty to use script's shebang.</small>
                                </div>
                                <div class="form-group">
                                    <label for="envFile">Environment File</label>
                                    <input type="text" id="envFile" placeholder="~/project/.env">
                                    <small class="help-text">Path to .env file to load environment variables from</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- HTTP Action -->
                    <div id="httpAction" class="action-config" style="display: none;">
                        <div class="form-group">
                            <label for="httpMethod">Method</label>
                            <select id="httpMethod">
                                <option value="GET">GET</option>
                                <option value="POST" selected>POST</option>
                                <option value="PUT">PUT</option>
                                <option value="DELETE">DELETE</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="httpUrl">URL *</label>
                            <input type="text" id="httpUrl" placeholder="http://localhost:3000/api/music/play">
                        </div>
                        <div class="form-group">
                            <label>Headers (Optional)</label>
                            <div id="headersContainer">
                                <div class="header-row">
                                    <input type="text" class="header-key" placeholder="Content-Type">
                                    <input type="text" class="header-value" placeholder="application/json">
                                    <button class="btn-icon" onclick="removeHeader(this)">‚àí</button>
                                </div>
                            </div>
                            <button class="btn btn-sm" onclick="addHeader()">+ Add Header</button>
                        </div>
                        <div class="form-group">
                            <label for="httpBody">Body Template (JSON)</label>
                            <textarea id="httpBody" rows="4" placeholder='{"query": "{query}"}'></textarea>
                            <small class="help-text" id="httpHelpText">
                                Use <code>{param_name}</code> for parameters. 
                                <strong>For optional fields</strong>, wrap in brackets: <code>{"text": "{text}"[, "title": "{title}"]}</code>
                            </small>
                        </div>
                    </div>

                    <!-- MCP Action -->
                    <div id="mcpAction" class="action-config" style="display: none;">
                        <div class="form-group">
                            <label for="mcpServerSelect">MCP Client *</label>
                            <select id="mcpServerSelect">
                                <option value="">Select a client</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="mcpToolSelect">Tool *</label>
                            <select id="mcpToolSelect" disabled>
                                <option value="">Select a client first</option>
                            </select>
                            <small class="help-text" id="mcpToolSummary"></small>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-sm" type="button" id="importMcpParamsBtn">Import Tool Parameters</button>
                        </div>
                    </div>
                </section>
                </div>
                <!-- End Command Sections -->

                <!-- MCP Sections -->
                <div id="mcpSections" style="display: none;">
                    <div class="mcp-editor-tabs">
                        <button class="mcp-editor-tab active" id="mcpCatalogTabBtn" type="button">Catalog</button>
                        <button class="mcp-editor-tab" id="mcpCustomTabBtn" type="button">Custom server</button>
                    </div>

                    <!-- Catalog Tab -->
                    <div id="mcpCatalogWrapper" class="mcp-tab-content">
                        <section class="editor-section catalog-search-section">
                            <div class="catalog-search-bar">
                                <input type="search" id="catalogSearchInput" placeholder="Search the MCP registry (e.g., Stripe, Linear, Jira)">
                                <button class="btn btn-sm btn-secondary" id="catalogRefreshBtn" type="button">Refresh</button>
                            </div>
                            <p class="help-text">Pick from the official Model Context Protocol registry. Secrets are stored in your macOS Keychain.</p>
                            <div id="catalogStatusMessage" class="catalog-status-message"></div>
                        </section>

                        <div class="catalog-grid">
                            <div class="catalog-results" id="catalogResults"></div>
                            <div class="catalog-detail">
                                <div id="catalogDetailEmpty" class="catalog-detail-empty">
                                    <p>Select a server to view details and configure it.</p>
                                </div>
                                <div id="catalogDetailContent" style="display: none;">
                                    <div class="catalog-detail-header">
                                        <div>
                                            <h3 id="catalogDetailName"></h3>
                                            <p id="catalogDetailPublisher" class="catalog-detail-meta"></p>
                                        </div>
                                        <span class="badge" id="catalogDetailBadge"></span>
                                    </div>
                                    <p id="catalogDetailDescription" class="catalog-detail-description"></p>
                                    <div id="catalogDetailTags" class="catalog-tag-list"></div>
                                    <div class="catalog-divider"></div>
                                    <div class="catalog-config-form">
                                        <div class="form-group">
                                            <label for="catalogNameInput">Display Name *</label>
                                            <input type="text" id="catalogNameInput" placeholder="Stripe">
                                        </div>
                                        <div class="form-group catalog-inline-group">
                                            <div>
                                                <label for="catalogTransportSelect">Transport</label>
                                                <select id="catalogTransportSelect"></select>
                                            </div>
                                            <label class="checkbox-label catalog-enabled-toggle">
                                                <input type="checkbox" id="catalogEnabledToggle" checked>
                                                <span>Enabled</span>
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="catalogEndpointInput">Endpoint URL</label>
                                            <input type="text" id="catalogEndpointInput" placeholder="https://mcp.example.com">
                                        </div>
                                        <div class="form-group">
                                            <label>Secrets</label>
                                            <div id="catalogSecretsContainer" class="catalog-secrets-container"></div>
                                        </div>
                                        <div class="catalog-advanced">
                                            <button class="catalog-advanced-toggle" id="catalogAdvancedToggle" type="button">
                                                Advanced options <span class="toggle-icon">‚ñº</span>
                                            </button>
                                            <div class="catalog-advanced-content" id="catalogAdvancedContent">
                                                <div class="form-group">
                                                    <label>Additional Headers</label>
                                                    <div id="catalogHeadersContainer" class="kv-container"></div>
                                                    <button class="btn btn-sm" id="catalogAddHeaderBtn" type="button">+ Add Header</button>
                                                </div>
                                                <div class="form-group">
                                                    <label>Query Parameters</label>
                                                    <div id="catalogParamsContainer" class="kv-container"></div>
                                                    <button class="btn btn-sm" id="catalogAddParamBtn" type="button">+ Add Parameter</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="catalog-actions">
                                            <button class="btn btn-secondary" id="catalogTestBtn" type="button">Save &amp; Test</button>
                                            <button class="btn btn-primary" id="catalogConfigureBtn" type="button">Save MCP Client</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Tab -->
                    <div id="mcpCustomWrapper" class="mcp-tab-content" style="display: none;">
                        <section class="editor-section">
                            <h3>General</h3>
                            <div class="form-group">
                                <label for="mcpName">Name *</label>
                                <input type="text" id="mcpName" placeholder="e.g., Linear" required>
                            </div>
                            <div class="form-group">
                                <label for="mcpTransport">Transport *</label>
                                <select id="mcpTransport">
                                    <option value="sse">Server-Sent Events (Legacy HTTP SSE)</option>
                                    <option value="http">HTTP (Remote MCP)</option>
                                    <option value="stdio">StdIO (Local process)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="mcpEnabled">
                                    <span>Enabled</span>
                                </label>
                            </div>
                        </section>

                        <section class="editor-section" id="mcpSseSection">
                            <h3>SSE Configuration</h3>
                            <div class="form-group">
                                <label for="mcpSseUrl">Endpoint URL *</label>
                                <input type="text" id="mcpSseUrl" placeholder="https://example.com/mcp">
                            </div>
                            <div class="form-group">
                                <label>Headers</label>
                                <div id="mcpHeadersContainer" class="kv-container"></div>
                                <button class="btn btn-sm" id="addHeaderBtn" type="button">+ Add Header</button>
                            </div>
                        </section>

                        <section class="editor-section" id="mcpHttpSection" style="display: none;">
                            <h3>HTTP Configuration</h3>
                            <div class="form-group">
                                <label for="mcpHttpUrl">Endpoint URL *</label>
                                <input type="text" id="mcpHttpUrl" placeholder="https://mcp.stripe.com">
                            </div>
                            <div class="form-group">
                                <label>Headers</label>
                                <div id="mcpHttpHeadersContainer" class="kv-container"></div>
                                <button class="btn btn-sm" id="addHttpHeaderBtn" type="button">+ Add Header</button>
                                <small class="help-text">Use Bearer tokens or other secrets via templating (e.g., Authorization: Bearer {{stripe_api_key}}).</small>
                            </div>
                        </section>

                        <section class="editor-section" id="mcpStdioSection" style="display: none;">
                            <h3>StdIO Configuration</h3>
                            <div class="form-group">
                                <label for="mcpStdioCommand">Command *</label>
                                <input type="text" id="mcpStdioCommand" placeholder="uvx linear-mcp-server">
                            </div>
                            <div class="form-group">
                                <label for="mcpStdioArgs">Arguments (one per line)</label>
                                <textarea id="mcpStdioArgs" rows="3" placeholder="--flag=value"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="mcpStdioCwd">Working Directory</label>
                                <input type="text" id="mcpStdioCwd" placeholder="~/projects/my-server">
                            </div>
                            <div class="form-group">
                                <label>Environment Variables</label>
                                <div id="mcpEnvContainer" class="kv-container"></div>
                                <button class="btn btn-sm" id="addEnvBtn" type="button">+ Add Variable</button>
                            </div>
                        </section>

                        <section class="editor-section">
                            <h3>Secret Fields</h3>
                            <p class="help-text">Define the secrets this client needs (e.g., API tokens). Values are stored securely in your macOS Keychain.</p>
                            <div id="mcpSecretFieldsContainer" class="secret-fields-container"></div>
                            <button class="btn btn-sm" id="addSecretFieldBtn" type="button">+ Add Secret Field</button>
                        </section>

                        <section class="editor-section">
                            <h3>Secret Values</h3>
                            <div id="mcpSecretValuesContainer" class="secret-values-container"></div>
                            <button class="btn btn-secondary" id="saveSecretsBtn" type="button">Save Secret Values</button>
                        </section>
                    </div>
                </div>
                <!-- End MCP Sections -->
            </div>

            <div class="editor-footer">
                <!-- Command Footer -->
                <div id="commandFooter">
                    <button class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                    <button class="btn btn-primary" id="saveCommandBtn" onclick="saveCommand()">Save Command</button>
                </div>
                <!-- MCP Footer -->
                <div id="mcpFooter" style="display: none;">
                    <div class="editor-footer-left">
                        <button class="btn btn-danger" id="deleteMcpBtn" type="button" style="display: none;">Delete</button>
                        <button class="btn btn-secondary" id="testMcpBtn" type="button">Test Connection</button>
                    </div>
                    <div class="editor-footer-right">
                        <button class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                        <button class="btn btn-primary" id="saveMcpBtn" type="button">Save Client</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Component -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon"></div>
                <h3 class="modal-title" id="modalTitle"></h3>
                <button class="modal-close" onclick="closeModal()" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-message" id="modalMessage"></p>
            </div>
            <div class="modal-footer" id="modalFooter">
                <button class="btn btn-secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Launch.json Importer Modal -->
    <div class="modal-overlay" id="launchJsonModal">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">Import from launch.json</h3>
                <button class="modal-close" onclick="closeLaunchJsonImporter()" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text-medium); margin-bottom: 16px;">
                    Paste a launch.json configuration entry below and we'll automatically fill in the fields:
                </p>
                <textarea 
                    id="launchJsonInput" 
                    placeholder='{\n  "name": "My Script",\n  "program": "${workspaceFolder}/path/to/script.py",\n  "python": "${workspaceFolder}/venv/bin/python",\n  "envFile": "${workspaceFolder}/.env",\n  "args": ["arg1", "arg2"]\n}'
                    rows="12"
                    style="width: 100%; font-family: 'Monaco', 'Courier New', monospace; font-size: 13px; padding: 12px; border: 1px solid var(--border-medium); border-radius: var(--radius-sm);"
                ></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeLaunchJsonImporter()">Cancel</button>
                <button class="btn btn-primary" onclick="importLaunchJson()">Import</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>

